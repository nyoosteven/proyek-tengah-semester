{% extends 'base.html' %}
{% load static %}


{% block meta %}
<title>Registrasi Akun</title>
{% endblock meta %}

{% block content %}  

<style>
    .helptext{
        display: none;
    }
</style>

<section class="vh-100 bg-image">
    <div class="mask d-flex align-items-center h-100 gradient-custom-3">
        <div class="container h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                    <div class="card" style="border-radius: 15px;">
                        <div class="card-body p-5">
                            
                            <h2 class="text-uppercase text-center mb-5">Create an account</h2>
                        
                                <form method="POST" action="" class="form-example">  
                                    {% csrf_token %}  
                                    <table>  
                                        {{ form.as_table }}  
                                        <tr>  
                                            <td></td>
                                            <td><input class="btn btn-primary btn-block btn-md gradient-custom-4" type="submit" name="submit" value="Buat Akun"/></td>  
                                        </tr>  
                                    </table>  
                                </form>
                        
                            {% if messages %}  
                                <ul>   
                                    {% for message in messages %}  
                                        <li>{{ message }}</li>  
                                        {% endfor %}  
                                </ul>   
                            {% endif %}
                        
                        </div>  
        
                    </div>
                </div>
            </div>
        </div>
        </div>        
    </div>

</section>

<script>
    $(document).ready(function(){
        $("#id_username").change(function(){
            var username = $(this).val();
        
            $.ajax({
                url: 'validate/',
                data: {
                    'username': username
                },
                dataType: 'json',
                success: function(data){
                    if(data.is_taken){
                        alert("Username already exist\nPlease change your username");
                    }
                }
            });
        });
    });
</script>
<script>
     $(document).ready(() => {
        document.getElementsByName("date_birth")[0].type="date"
    })
</script>


{% endblock content %}